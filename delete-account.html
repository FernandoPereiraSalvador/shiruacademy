<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title data-i18n="title">Solicitud de eliminación de cuenta – Japanify</title>
  <style>
    :root{
      --bg:#FAF5D8; --card:#fff; --text:#161616; --muted:#666; --brand:#3C7262;
      --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.10);
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);
         font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
         display:flex;justify-content:center;padding:32px}
    .wrap{width:100%;max-width:780px;background:var(--card);
          border-radius:var(--radius);box-shadow:var(--shadow);padding:28px}
    h1{color:var(--brand);margin:0 0 8px;text-align:center}
    p.muted{color:var(--muted);margin-top:0;text-align:center}
    .center{display:flex;justify-content:center;align-items:center;text-align:center}
    label{display:block;margin:14px 0 6px}
    input, textarea{width:100%;padding:12px;border:1px solid #ddd;border-radius:10px;font-size:16px}
    textarea{min-height:120px;resize:vertical}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .row .col{display:block}
    .btn{background:var(--brand);border:none;color:#fff;padding:12px 18px;border-radius:10px;
         font-weight:600;cursor:pointer;box-shadow:0 8px 16px rgba(60,114,98,.25);}
    .btn[disabled]{opacity:.6;cursor:not-allowed}
    .card{border:1px solid #eee;border-radius:12px;padding:12px;background:#fff;margin:12px 0}
    .small{font-size:.95rem;color:var(--muted)}
    .success,.error{padding:12px;border-radius:10px;margin-top:12px}
    .success{background:#e8f7ef;border:1px solid #bfe7cf}
    .error{background:#fdecea;border:1px solid #f5c2c0}
    a{color:var(--brand)}
    .actions{display:flex;justify-content:center;gap:12px;margin-top:12px}
    .checkbox-block{display:flex;justify-content:center}
    .checkbox-inner{max-width:640px;width:100%;display:flex;flex-direction:column;align-items:center}
    .langbar{display:flex;justify-content:center;gap:8px;margin:8px 0 16px}
    .langbar select{padding:6px 10px;border:1px solid #ddd;border-radius:8px;background:#fff}
    .footer{text-align:center;margin-top:8px}
    .stack{display:flex;flex-direction:column;align-items:center;gap:8px}
    .stack label{margin:0;display:flex;align-items:center;gap:8px}
    @media (max-width:600px){ .row{grid-template-columns:1fr} }
  
    input[type="checkbox"] {
      width: 20px;
      height: 20px;
      transform: scale(1.3);
      cursor: pointer;
    }

  </style>
</head>
<body>
  <div class="wrap" data-i18n-scope>
    <div class="langbar">
      <label for="langSel" data-i18n="language">Idioma:</label>
      <select id="langSel" aria-label="Language">
        <option value="es">Español</option>
        <option value="en">English</option>
        <option value="fr">Français</option>
        <option value="de">Deutsch</option>
        <option value="ko">한국어</option>
        <option value="zh-CN">简体中文</option>
        <option value="ja">日本語</option>
        <option value="pt">Português</option>
        <option value="it">Italiano</option>
      </select>
    </div>

    <h1 data-i18n="h1">Solicitud de eliminación de cuenta</h1>
    <p class="muted" data-i18n="lead">Usa este formulario para solicitar la <strong>eliminación permanente</strong> de tu cuenta y de todos los datos asociados a Japanify.</p>

    <form id="deleteForm" novalidate>
      <div class="row">
        <div class="col">
          <label for="email" data-i18n="emailLabel">Correo de tu cuenta (obligatorio)</label>
          <input id="email" name="email" type="email" required placeholder="you@email.com" />
        </div>
        <div class="col">
          <label for="country" data-i18n="countryLabel">País (opcional)</label>
          <input id="country" name="country" type="text" placeholder="España" />
        </div>
      </div>

      <label for="reason" data-i18n="reasonLabel">Motivo (opcional)</label>
      <textarea id="reason" name="reason" data-i18n-placeholder="reasonPh" placeholder="Cuéntanos si quieres por qué solicitas la eliminación."></textarea>

      <div class="card checkbox-block">
        <div class="checkbox-inner">
          <div class="stack">
            <label>
              <input id="confirm" type="checkbox" required />
              <span data-i18n="confirm">Confirmo que quiero eliminar mi cuenta y que la acción es irreversible.</span>
            </label>
            <p class="small center" data-i18n="legal">La eliminación incluye progreso, trofeos, preferencias y cualquier dato asociado. Tiempo de procesamiento: hasta 30 días naturales.</p>
          </div>
        </div>
      </div>

      <div class="actions">
        <button class="btn" id="submitBtn" type="submit" data-i18n="submit">Enviar solicitud</button>
      </div>
      <div id="msg" class="center"></div>
    </form>

    <hr/>
    <p class="small footer" data-i18n="emailAlt">También puedes solicitarlo por correo escribiendo desde la dirección de tu cuenta a <a href="mailto:fernandopereirasalvador@gmail.com">fernandopereirasalvador@gmail.com</a> con el asunto “Eliminar cuenta Japanify”.</p>

    <p class="small footer">© 2025 Japanify · <a href="privacy-policy.html" data-i18n="privacy">Política de privacidad</a></p>
  </div>

  <script>
    // i18n dictionary
    const I18N = {
      es: {
        title:"Solicitud de eliminación de cuenta – Japanify",
        language:"Idioma:",
        h1:"Solicitud de eliminación de cuenta",
        lead:"Usa este formulario para solicitar la <strong>eliminación permanente</strong> de tu cuenta y de todos los datos asociados a Japanify.",
        emailLabel:"Correo de tu cuenta (obligatorio)",
        countryLabel:"País (opcional)",
        reasonLabel:"Motivo (opcional)",
        reasonPh:"Cuéntanos si quieres por qué solicitas la eliminación.",
        confirm:"Confirmo que quiero eliminar mi cuenta y que la acción es irreversible.",
        legal:"La eliminación incluye progreso, trofeos, preferencias y cualquier dato asociado. Tiempo de procesamiento: hasta 30 días naturales.",
        submit:"Enviar solicitud",
        emailAlt:'También puedes solicitarlo por correo escribiendo desde la dirección de tu cuenta a <a href="mailto:fernandopereirasalvador@gmail.com">fernandopereirasalvador@gmail.com</a> con el asunto “Eliminar cuenta Japanify”.',
        privacy:"Política de privacidad",
        ok:"Solicitud enviada. Te contactaremos al correo indicado para verificar la identidad y completar la eliminación.",
        fail:"No se pudo enviar. Revisa tu conexión o inténtalo de nuevo más tarde.",
        net:"Error de red. Inténtalo más tarde."
      },
      en: {
        title:"Account deletion request – Japanify",
        language:"Language:",
        h1:"Account deletion request",
        lead:"Use this form to request the <strong>permanent deletion</strong> of your account and all data associated with Japanify.",
        emailLabel:"Your account email (required)",
        countryLabel:"Country (optional)",
        reasonLabel:"Reason (optional)",
        reasonPh:"Tell us (optionally) why you request deletion.",
        confirm:"I confirm I want to delete my account and understand this action is irreversible.",
        legal:"Deletion includes progress, trophies, preferences, and any associated data. Processing time: up to 30 calendar days.",
        submit:"Submit request",
        emailAlt:'You can also email us from your account address at <a href="mailto:fernandopereirasalvador@gmail.com">fernandopereirasalvador@gmail.com</a> with subject “Delete Japanify account”.',
        privacy:"Privacy policy",
        ok:"Request sent. We will contact you via email to verify identity and complete the deletion.",
        fail:"Unable to submit. Check your connection or try again later.",
        net:"Network error. Please try again later."
      },
      fr: {
        title:"Demande de suppression de compte – Japanify",
        language:"Langue :",
        h1:"Demande de suppression de compte",
        lead:"Utilisez ce formulaire pour demander la <strong>suppression définitive</strong> de votre compte et de toutes les données associées à Japanify.",
        emailLabel:"E‑mail du compte (obligatoire)",
        countryLabel:"Pays (optionnel)",
        reasonLabel:"Motif (optionnel)",
        reasonPh:"Dites‑nous (facultatif) pourquoi vous demandez la suppression.",
        confirm:"Je confirme vouloir supprimer mon compte et comprendre que cette action est irréversible.",
        legal:"La suppression inclut progression, trophées, préférences et toutes les données associées. Délai : jusqu’à 30 jours calendaires.",
        submit:"Envoyer la demande",
        emailAlt:'Vous pouvez aussi nous écrire depuis l’adresse liée à votre compte à <a href="mailto:fernandopereirasalvador@gmail.com">fernandopereirasalvador@gmail.com</a> avec l’objet « Supprimer compte Japanify ».',
        privacy:"Politique de confidentialité",
        ok:"Demande envoyée. Nous vous contacterons par e‑mail pour vérifier votre identité et finaliser la suppression.",
        fail:"Échec de l’envoi. Vérifiez votre connexion ou réessayez plus tard.",
        net:"Erreur réseau. Réessayez plus tard."
      },
      de: {
        title:"Kontolöschungsantrag – Japanify",
        language:"Sprache:",
        h1:"Kontolöschungsantrag",
        lead:"Nutzen Sie dieses Formular, um die <strong>dauerhafte Löschung</strong> Ihres Kontos und aller zugehörigen Daten bei Japanify zu beantragen.",
        emailLabel:"E‑Mail Ihres Kontos (erforderlich)",
        countryLabel:"Land (optional)",
        reasonLabel:"Grund (optional)",
        reasonPh:"Optional: Warum möchten Sie löschen?",
        confirm:"Ich bestätige, dass ich mein Konto löschen möchte und verstehe, dass dies unwiderruflich ist.",
        legal:"Die Löschung umfasst Fortschritt, Trophäen, Präferenzen und alle zugehörigen Daten. Bearbeitungszeit: bis zu 30 Kalendertage.",
        submit:"Anfrage senden",
        emailAlt:'Sie können uns auch von Ihrer Konto‑E‑Mail an <a href="mailto:fernandopereirasalvador@gmail.com">fernandopereirasalvador@gmail.com</a> mit dem Betreff „Japanify‑Konto löschen“ schreiben.',
        privacy:"Datenschutzerklärung",
        ok:"Anfrage gesendet. Wir kontaktieren Sie per E‑Mail zur Identitätsprüfung und finalen Löschung.",
        fail:"Senden fehlgeschlagen. Bitte Verbindung prüfen oder später erneut versuchen.",
        net:"Netzwerkfehler. Bitte später erneut versuchen."
      },
      ko: {
        title:"계정 삭제 요청 – Japanify",
        language:"언어:",
        h1:"계정 삭제 요청",
        lead:"이 양식을 사용하여 Japanify 계정과 모든 연결된 데이터를 <strong>영구 삭제</strong>해 주세요.",
        emailLabel:"계정 이메일 (필수)",
        countryLabel:"국가 (선택)",
        reasonLabel:"사유 (선택)",
        reasonPh:"삭제 요청 사유를 적어 주세요 (선택).",
        confirm:"계정 삭제를 원하며 이 작업이 되돌릴 수 없음을 이해합니다.",
        legal:"삭제에는 진행도, 트로피, 환경설정 등 모든 연관 데이터가 포함됩니다. 처리 기간: 최대 30일.",
        submit:"요청 보내기",
        emailAlt:'계정 이메일로 <a href="mailto:fernandopereirasalvador@gmail.com">fernandopereirasalvador@gmail.com</a> 에 “Delete Japanify account” 제목으로 보내주셔도 됩니다.',
        privacy:"개인정보 처리방침",
        ok:"요청이 접수되었습니다. 신원 확인 및 삭제 완료를 위해 이메일로 안내드립니다.",
        fail:"제출할 수 없습니다. 연결을 확인하시고 다시 시도해 주세요.",
        net:"네트워크 오류입니다. 나중에 다시 시도해 주세요."
      },
      "zh-CN": {
        title:"账户删除申请 – Japanify",
        language:"语言：",
        h1:"账户删除申请",
        lead:"使用此表单申请<strong>永久删除</strong>您的 Japanify 账户及所有相关数据。",
        emailLabel:"账户邮箱（必填）",
        countryLabel:"国家（可选）",
        reasonLabel:"原因（可选）",
        reasonPh:"（可选）说明申请删除的原因。",
        confirm:"我确认要删除我的账户，并知悉此操作不可撤销。",
        legal:"删除包括进度、奖杯、偏好和所有相关数据。处理时间：最多 30 天。",
        submit:"提交申请",
        emailAlt:'您也可以使用账户邮箱发送邮件至 <a href="mailto:fernandopereirasalvador@gmail.com">fernandopereirasalvador@gmail.com</a>，主题为“Delete Japanify account”。',
        privacy:"隐私政策",
        ok:"申请已提交。我们将通过电子邮件联系您以核验身份并完成删除。",
        fail:"提交失败。请检查网络连接或稍后重试。",
        net:"网络错误，请稍后重试。"
      },
      ja: {
        title:"アカウント削除申請 – Japanify",
        language:"言語：",
        h1:"アカウント削除申請",
        lead:"本フォームから、Japanify アカウントおよび関連データの<strong>恒久的な削除</strong>を申請できます。",
        emailLabel:"アカウントのメールアドレス（必須）",
        countryLabel:"国（任意）",
        reasonLabel:"理由（任意）",
        reasonPh:"削除申請の理由（任意）。",
        confirm:"アカウントを削除し、この操作が取り消せないことを理解しています。",
        legal:"削除には進捗、トロフィー、設定などすべての関連データが含まれます。処理期間：最大30日。",
        submit:"申請を送信",
        emailAlt:'アカウントのメールから <a href="mailto:fernandopereirasalvador@gmail.com">fernandopereirasalvador@gmail.com</a> へ件名「Delete Japanify account」で送信しても構いません。',
        privacy:"プライバシーポリシー",
        ok:"申請を送信しました。本人確認および削除完了のため、メールにてご連絡します。",
        fail:"送信できませんでした。接続を確認して再試行してください。",
        net:"ネットワークエラー。後でもう一度お試しください。"
      },
      pt: {
        title:"Pedido de eliminação de conta – Japanify",
        language:"Idioma:",
        h1:"Pedido de eliminação de conta",
        lead:"Use este formulário para solicitar a <strong>eliminação permanente</strong> da sua conta e de todos os dados associados ao Japanify.",
        emailLabel:"E‑mail da conta (obrigatório)",
        countryLabel:"País (opcional)",
        reasonLabel:"Motivo (opcional)",
        reasonPh:"(Opcional) Diga-nos por que deseja eliminar.",
        confirm:"Confirmo que desejo eliminar a minha conta e que esta ação é irreversível.",
        legal:"A eliminação inclui progresso, troféus, preferências e quaisquer dados associados. Prazo: até 30 dias corridos.",
        submit:"Enviar pedido",
        emailAlt:'Também pode enviar um e‑mail a partir do endereço da sua conta para <a href="mailto:fernandopereirasalvador@gmail.com">fernandopereirasalvador@gmail.com</a> com o assunto “Delete Japanify account”.',
        privacy:"Política de privacidade",
        ok:"Pedido enviado. Entraremos em contacto por e‑mail para verificar a identidade e concluir a eliminação.",
        fail:"Não foi possível enviar. Verifique a ligação ou tente novamente mais tarde.",
        net:"Erro de rede. Tente novamente mais tarde."
      },
      it: {
        title:"Richiesta di eliminazione account – Japanify",
        language:"Lingua:",
        h1:"Richiesta di eliminazione account",
        lead:"Usa questo modulo per richiedere la <strong>cancellazione permanente</strong> del tuo account e di tutti i dati associati a Japanify.",
        emailLabel:"Email dell’account (obbligatoria)",
        countryLabel:"Paese (opzionale)",
        reasonLabel:"Motivo (opzionale)",
        reasonPh:"(Opzionale) Spiega perché richiedi l’eliminazione.",
        confirm:"Confermo di voler eliminare il mio account e comprendo che l’operazione è irreversibile.",
        legal:"La cancellazione include progressi, trofei, preferenze e tutti i dati associati. Tempo di elaborazione: fino a 30 giorni.",
        submit:"Invia richiesta",
        emailAlt:'Puoi anche inviarci un’e‑mail dall’indirizzo associato al tuo account a <a href="mailto:fernandopereirasalvador@gmail.com">fernandopereirasalvador@gmail.com</a> con oggetto “Delete Japanify account”.',
        privacy:"Informativa sulla privacy",
        ok:"Richiesta inviata. Ti contatteremo via e‑mail per verificare l’identità e completare la cancellazione.",
        fail:"Impossibile inviare. Controlla la connessione o riprova più tardi.",
        net:"Errore di rete. Riprova più tardi."
      }
    };

    // helpers
    const $ = (s, p=document) => p.querySelector(s);
    const $$ = (s, p=document) => Array.from(p.querySelectorAll(s));

    function setLang(lang){
      const dict = I18N[lang] || I18N.es;
      document.documentElement.lang = lang;
      $$('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if(dict[key] != null){
          if(key === 'lead' || key === 'emailAlt'){
            el.innerHTML = dict[key];
          }else{
            el.textContent = dict[key];
          }
        }
      });
      $$('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        if(dict[key] != null) el.setAttribute('placeholder', dict[key]);
      });
      document.title = dict.title;
      $('#langSel').value = lang;
      localStorage.setItem('jpn_del_lang', lang);
    }

    function detectLang(){
      const saved = localStorage.getItem('jpn_del_lang');
      if(saved && I18N[saved]) return saved;
      const url = new URL(location.href);
      const qp = url.searchParams.get('lang');
      if (qp && I18N[qp]) return qp;
      const nav = (navigator.languages && navigator.languages[0]) || navigator.language || 'es';
      const norm = nav.toLowerCase();
      if (norm.startsWith('es')) return 'es';
      if (norm.startsWith('en')) return 'en';
      if (norm.startsWith('fr')) return 'fr';
      if (norm.startsWith('de')) return 'de';
      if (norm.startsWith('ko')) return 'ko';
      if (norm === 'zh-cn' || norm.startsWith('zh')) return 'zh-CN';
      if (norm.startsWith('ja')) return 'ja';
      if (norm.startsWith('pt')) return 'pt';
      if (norm.startsWith('it')) return 'it';
      return 'en';
    }

    // FORM: endpoints
    const ACTION_URL = "https://formspree.io/f/xovnbqjl";       // <--- REEMPLAZA por tu endpoint Formspree/Netlify
    const CONFIRM_WEBHOOK = "https://script.google.com/macros/s/XXXXXXXX/exec"; // <--- Opcional: Apps Script para correo de confirmación

    const form = $('#deleteForm');
    const btn  = $('#submitBtn');
    const msg  = $('#msg');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      msg.innerHTML = "";
      if(!form.reportValidity()) return;

      btn.disabled = true;
      const lang = document.documentElement.lang || 'es';
      const dict = I18N[lang] || I18N.es;
      const payload = {
        email: form.email.value.trim(),
        country: form.country.value.trim(),
        reason: form.reason.value.trim(),
        confirm: $('#confirm').checked,
        app: "Japanify",
        type: "account_deletion_request",
        lang,
        ts: new Date().toISOString()
      };

      try {
        // 1) Enviar solicitud al proveedor de formularios
        const res = await fetch(ACTION_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json", "Accept": "application/json" },
          body: JSON.stringify(payload)
        });

        if(res.ok){
          form.reset();
          msg.innerHTML = `<div class="success">${dict.ok}</div>`;

          // 2) (Opcional) Disparar correo de confirmación al usuario
          //    Implementa CONFIRM_WEBHOOK con Google Apps Script o tu backend
          if (CONFIRM_WEBHOOK.startsWith("https://script.google.com") || CONFIRM_WEBHOOK.startsWith("https://")){
            fetch(CONFIRM_WEBHOOK, {
              method:"POST",
              headers:{ "Content-Type":"application/json" },
              body: JSON.stringify({to: payload.email, lang, kind:"account_deletion_ack"})
            }).catch(()=>{});
          }
        } else {
          msg.innerHTML = `<div class="error">${dict.fail}</div>`;
        }
      } catch (err){
        msg.innerHTML = `<div class="error">${dict.net}</div>`;
      } finally {
        btn.disabled = false;
      }
    });

    // init
    const initLang = detectLang();
    setLang(initLang);
    $('#langSel').addEventListener('change', e => setLang(e.target.value));
  </script>
</body>
</html>
